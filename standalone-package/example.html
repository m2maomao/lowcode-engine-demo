<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lowcode Engine Standalone Renderer Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    #container {
      border: 1px solid #ddd;
      padding: 20px;
      min-height: 300px;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <h1>Lowcode Engine Standalone Renderer Example</h1>
  <div id="container"></div>

  <!-- Required scripts -->
  <script src="dist/vue.runtime.global.js"></script>
  <script src="dist/vue-renderer.js"></script>
  <script src="dist/standalone-renderer.js"></script>
  <script src="https://unpkg.com/naive-ui@2.32.0/dist/index.prod.js"></script>

  <script>
    // Example schema and packages from examples/lowcode-schema.json
    const schema = {
      "componentName": "Page",
      "id": "node_dockcviv8fo1",
      "props": {},
      "fileName": "/",
      "state": {
        "text": {
          "type": "JSExpression",
          "value": "\"outer\""
        },
        "isShowDialog": {
          "type": "JSExpression",
          "value": "false"
        },
        "info": {
          "type": "JSExpression",
          "value": "{\n  \"info\": \"\",\n  \"user\": {\n    \"username\": \"\",\n    \"password\": \"\"\n  }\n}"
        }
      },
      "dataSource": {
        "list": [
          {
            "type": "fetch",
            "isInit": true,
            "options": {
              "params": {},
              "method": "GET",
              "isCors": true,
              "timeout": 5000,
              "headers": {},
              "uri": "mock/info.json"
            },
            "id": "info"
          },
          {
            "type": "fetch",
            "isInit": false,
            "options": {
              "params": {
                "username": {
                  "type": "JSExpression",
                  "value": "this.info.user.username"
                },
                "password": {
                  "type": "JSExpression",
                  "value": "this.info.user.password"
                }
              },
              "method": "POST",
              "isCors": true,
              "timeout": 5000,
              "headers": {
                "Auth": {
                  "type": "JSExpression",
                  "value": "this.text"
                },
                "Content-Type": "application/json"
              },
              "uri": "/api/user/login"
            },
            "id": "submit"
          }
        ]
      },
      "children": [
        {
          "componentName": "NCard",
          "id": "node_ocl4goj8tm1",
          "props": {
            "segmented": {
              "content": false,
              "footer": false,
              "action": false
            },
            "header": {
              "type": "JSSlot",
              "value": {
                "componentName": "Slot",
                "id": "node_ocm9u0vpg61",
                "props": {},
                "title": "头部",
                "children": [
                  {
                    "componentName": "NText",
                    "id": "node_ocl4goj8tm3",
                    "props": {
                      "children": "用户登录",
                      "type": "default",
                      "tag": "span"
                    }
                  }
                ]
              },
              "id": "node_ocm9u0vpg61"
            }
          },
          "children": [
            {
              "componentName": "NForm",
              "id": "node_ocl4gmvfwx1",
              "props": {
                "label-width": 80,
                "label-align": "left",
                "label-placement": "left",
                "require-mark-placement": "right",
                "model": {
                  "type": "JSExpression",
                  "value": "this.info.user"
                }
              },
              "children": [
                {
                  "componentName": "NFormItem",
                  "id": "node_ocl4i3antp2",
                  "props": {
                    "label": "用户名",
                    "path": "username",
                    "size": "medium",
                    "show-label": true,
                    "label-align": "left",
                    "label-placement": "left",
                    "require-mark-placement": "right",
                    "rule": {
                      "type": "string",
                      "required": true,
                      "trigger": [
                        "input",
                        "blur"
                      ],
                      "message": "请输入用户名"
                    },
                    "label-width": "auto"
                  },
                  "children": [
                    {
                      "componentName": "NInput",
                      "id": "node_ocl4i3antp3",
                      "props": {
                        "placeholder": "请输入用户名",
                        "v-model:value": {
                          "type": "JSExpression",
                          "value": "this.info.user.username"
                        },
                        "show-password-on": "click"
                      }
                    }
                  ]
                },
                {
                  "componentName": "NFormItem",
                  "id": "node_ocl4i3antp4",
                  "props": {
                    "label": "密码",
                    "path": "password",
                    "size": "medium",
                    "show-label": true,
                    "label-align": "left",
                    "label-placement": "left",
                    "require-mark-placement": "right",
                    "rule": {
                      "type": "string",
                      "required": true,
                      "trigger": [
                        "input",
                        "blur"
                      ],
                      "message": "请输入密码"
                    }
                  },
                  "children": [
                    {
                      "componentName": "NInput",
                      "id": "node_ocl4i3antp5",
                      "props": {
                        "placeholder": "请输入密码",
                        "v-model:value": {
                          "type": "JSExpression",
                          "value": "this.info.user.password"
                        },
                        "type": "password",
                        "show-password-on": "click"
                      }
                    }
                  ]
                },
                {
                  "componentName": "NSpace",
                  "id": "node_ocl4goj8tm4",
                  "props": {
                    "align": "start",
                    "justify": "center",
                    "size": "medium"
                  },
                  "children": [
                    {
                      "componentName": "NButton",
                      "id": "node_ocl4goj8tm6",
                      "props": {
                        "children": "登录",
                        "icon-placement": "left",
                        "attr-type": "submit",
                        "type": "primary",
                        "size": "medium",
                        "bordered": true
                      }
                    },
                    {
                      "componentName": "NButton",
                      "id": "node_ocl4goj8tm5",
                      "props": {
                        "children": "重置",
                        "icon-placement": "left",
                        "attr-type": "button",
                        "type": "default",
                        "size": "medium",
                        "bordered": true
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    };

    // Component packages
    const packages = [
      {
        "package": "naive-ui",
        "version": "2.32.0",
        "urls": [
          "https://unpkg.com/naive-ui@2.32.0/dist/index.prod.js"
        ],
        "library": "naive"
      }
    ];

    // Render the schema
    window.StandaloneRenderer.renderSchema({
      containerId: 'container',
      schema: schema,
      packages: packages
    }).catch(error => {
      console.error('Failed to render schema:', error);
      document.getElementById('container').innerHTML =
        '<div style="color: red;">Error rendering schema. See console for details.</div>';
    });
  </script>
</body>

</html>